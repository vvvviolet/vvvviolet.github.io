<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Flask+Redis维护代理池 │ Hexo</title><link rel="stylesheet" href="/css/oasis.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body><div id="content"><h1 id="title">Flask+Redis维护代理池</h1><div id="menu-outer"><nav id="menu-inner"><a id="menu-back" href="javascript:history.back()">Back</a><time datetime="2023-09-07T04:43:44.530Z">2023-09-07</time></nav></div><div id="content-outer"><div id="content-inner"><article id="post"><p>池：本质上是队列</p>
<p>Redis：存储</p>
<p>Flask：提供web接口服务</p>
<h3 id="代理池的要求"><a href="#代理池的要求" class="headerlink" title="代理池的要求"></a>代理池的要求</h3><p>多站抓取，异步检测</p>
<p>定时筛选，持续更新</p>
<p>提供接口，易于提取</p>
<h4 id="代理池架构"><a href="#代理池架构" class="headerlink" title="代理池架构"></a>代理池架构</h4><p> 爬虫</p>
<p>  |</p>
<p>获取器–过滤器–代理队列–定时检测器</p>
<p>​		  |</p>
<p>​		 API</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>Github: Germey&#x2F;ProxyPool</p>
<p>调度器</p>
<p>python多进程</p>
<p>from multiprocessing import process</p>
<p>async:python3.5</p>
<h1 id="18：31"><a href="#18：31" class="headerlink" title="18：31"></a>18：31</h1><p>现在的首要学习应该是Python多线程</p>
<p>{“ciphertext”:”%2BK4lIHYL%2BKp8lHUlxQxsmc63cwDto6KidFDLYTmREdp%2FIOGY8YJPLRPpWocqrljn93UDkr%2FXtMtJ2eVozu2%2Fyv46VGEjSIF4UNFJB4fW2ESqD1Zpll6EK0Gzo7FXYgIJlYCsiGeBd2GiPCzGeVBh1Np4U3KnMmKuAVxTT5V5E4Iuh%2FBCUgAlkGF88cUAEsNPh0Q7h3XSZUz26bfYr1WTTMKaY3QxEEsoudow1fpv%2Fxkhe1nT7dQ1AlPHs34dCOsNqkDgEjbl911nQFOGLiM2FivfsYTb0eTF2G0PSNmBHvqmKyPYAo7LhgtSYwQLk04C8ZaYRp0II2EUxykxCTvmL0ws2gJFhu0pDBw8SdrL5p8v7bFnN%2FFYQgkb8Bk0JkwjC1LUy7M668BxPZysaBXeZ7NiV7bjd3ANYdlXcWKOidBu%2Bv3che9E2H6Ex3p0UkPdVp9oAocw6ixqdZ8Qwg8ZUcLlCzXxe6D4jmtxdZmC5CR%2FbALKK6nn7K%2BTkujq%2BK5XvxKIuYBhHN%2FFMgAxsL6OQ%2BM6jMOGMYFHb32nFmp1j92JQR8Ywkjn%2FhcgVBygesuNQFMXYodZ9uNpOSjhaqAkmA%3D%3D”,”checkCode”:”16fb773454245ae07b88db963ce7ad52”}</p>
<p>+K4lIHYL+Kp8lHUlxQxsmc63cwDto6KidFDLYTmREdp&#x2F;IOGY8YJPLRPpWocqrljn93UDkr&#x2F;XtMtJ2eVozu2&#x2F;yv46VGEjSIF4UNFJB4fW2ESqD1Zpll6EK0Gzo7FXYgIJlYCsiGeBd2GiPCzGeVBh1Np4U3KnMmKuAVxTT5V5E4Iuh&#x2F;BCUgAlkGF88cUAEsNPh0Q7h3XSZUz26bfYr1WTTMKaY3QxEEsoudow1fpv&#x2F;xkhe1nT7dQ1AlPHs34dCOsNqkDgEjbl911nQFOGLiM2FivfsYTb0eTF2G0PSNmBHvqmKyPYAo7LhgtSYwQLk04C8ZaYRp0II2EUxykxCTvmL0ws2gJFhu0pDBw8SdrL5p8v7bFnN&#x2F;FYQgkb8Bk0JkwjC1LUy7M668BxPZysaBXeZ7NiV7bjd3ANYdlXcWKOidBu+v3che9E2H6Ex3p0UkPdVp9oAocw6ixqdZ8Qwg8ZUcLlCzXxe6D4jmtxdZmC5CR&#x2F;bALKK6nn7K+Tkujq+K5XvxKIuYBhHN&#x2F;FMgAxsL6OQ+M6jMOGMYFHb32nFmp1j92JQR8Ywkjn&#x2F;hcgVBygesuNQFMXYodZ9uNpOSjhaqAkmA&#x3D;&#x3D;</p>
<p>from urllib import parse</p>
<p>parse.unquote(code)</p>
<h1 id="19：10"><a href="#19：10" class="headerlink" title="19：10"></a>19：10</h1><p>算了…不把重点放在这上面了，去做建设性工作，少做批判性工作。</p>
<h1 id="21-39"><a href="#21-39" class="headerlink" title="21:39"></a>21:39</h1><p>原神16级，开放多人世界达成</p>
<p>google小恐龙游戏</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">|</span><span class="token operator">-</span>Plaza
  <span class="token operator">|</span><span class="token operator">-</span>app<span class="token operator">/</span>
    <span class="token operator">|</span><span class="token operator">-</span>templates<span class="token operator">/</span>
    <span class="token operator">|</span><span class="token operator">-</span><span class="token keyword">static</span><span class="token operator">/</span>
    <span class="token operator">|</span><span class="token operator">-</span>main<span class="token operator">/</span>
      <span class="token operator">|</span><span class="token operator">-</span>__init__<span class="token punctuation">.</span>py
      <span class="token operator">|</span><span class="token operator">-</span>errors<span class="token punctuation">.</span>py
      <span class="token operator">|</span><span class="token operator">-</span>forms<span class="token punctuation">.</span>py
      <span class="token operator">|</span><span class="token operator">-</span>views<span class="token punctuation">.</span>py
    <span class="token operator">|</span><span class="token operator">-</span>__init__<span class="token punctuation">.</span>py
    <span class="token operator">|</span><span class="token operator">-</span>email<span class="token punctuation">.</span>py
    <span class="token operator">|</span><span class="token operator">-</span>models<span class="token punctuation">.</span>py
  <span class="token operator">|</span><span class="token operator">-</span>migrations<span class="token operator">/</span>
  <span class="token operator">|</span><span class="token operator">-</span>tests<span class="token operator">/</span>
    <span class="token operator">|</span><span class="token operator">-</span>__init__<span class="token punctuation">.</span>py
    <span class="token operator">|</span><span class="token operator">-</span>test<span class="token operator">*</span><span class="token punctuation">.</span>py
  <span class="token operator">|</span><span class="token operator">-</span>venv<span class="token operator">/</span>
  <span class="token operator">|</span><span class="token operator">-</span>requirements<span class="token punctuation">.</span>txt
  <span class="token operator">|</span><span class="token operator">-</span>config<span class="token punctuation">.</span>py
  <span class="token operator">|</span><span class="token operator">-</span>flasky<span class="token punctuation">.</span>py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://flask-zh.readthedocs.io/api/#flask.g"><code>g</code></a> 是一个特殊的对象，它对每一个请求都是唯一的。</p>
<p><a target="_blank" rel="noopener" href="https://flask-zh.readthedocs.io/api/#flask.current_app"><code>current_app</code></a> 是另一个特殊的对象，它<strong>指向</strong>处理请求的 Flask 应用。因为你使用了一个应用工厂，所以当写其他部分代码时没有应用对象。当应用被创建并且正在处理一个请求时，<code>get_db</code> 将会被调用，所以可以使用 <a target="_blank" rel="noopener" href="https://flask-zh.readthedocs.io/api/#flask.current_app"><code>current_app</code></a>。</p>
<p>Flask应用一般保存在名为app的包中；</p>
<p>和之前一样，数据库迁移脚本在migrations文件夹中；</p>
<p>单元测试在tests包中编写；</p>
<p>和之前一样，Python虚拟环境在venv文件夹中。此外，这种结构还多了一些新文件：</p>
<p>requirements.txt列出了所有依赖包，便于在其他计算机中重新生成相同的虚拟环境；</p>
<p>config.py存储配置；</p>
<p>flasky.py定义Flask应用实例，同时还有一些辅助管理应用的任务。</p>
</article><div id="paginator"></div></div></div><div id="bottom-outer"><div id="bottom-inner"><hr><div><div><a>2023@ John Doe</a><a href="/atom.xml"><img src="/assets/rss.png"></a></div><div id="hexo"><a>Powered by&nbsp</a><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><a>&nbsp&&nbsp</a><a target="_blank" rel="noopener" href="https://github.com/qiantao94/hexo-theme-oasis">Oasis</a></div></div></div></div></div></body><script src="/js/oasis.js"></script></html>